<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Teachable Machine Remote Model Test</title>
  <link rel="stylesheet" href="style.css">
  <style>body{padding:30px} #webcam-container canvas{border-radius:8px} #label-container{margin-top:12px}</style>
</head>
<body>
  <h2>Teachable Machine 이미지 테스트</h2>
  <div class="note">원격 모델: https://teachablemachine.withgoogle.com/models/bqtcKlKOT/</div>
  <div style="margin-top:12px;">
    <div>Teachable Machine Image Model</div>
    <button type="button" onclick="init()">Start</button>
  </div>
  <div id="webcam-container"></div>
  <div id="label-container"></div>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
  <script type="text/javascript">
    const URL = 'https://teachablemachine.withgoogle.com/models/bqtcKlKOT/';
    let model, webcam, labelContainer, maxPredictions;
    async function init(){
      try{
        const modelURL = URL + 'model.json';
        const metadataURL = URL + 'metadata.json';
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();
        const flip = true;
        webcam = new tmImage.Webcam(200,200,flip);
        await webcam.setup(); await webcam.play();
        document.getElementById('webcam-container').appendChild(webcam.canvas);
        labelContainer = document.getElementById('label-container'); labelContainer.innerHTML='';
        for(let i=0;i<maxPredictions;i++) labelContainer.appendChild(document.createElement('div'));
        loop();
      }catch(e){ console.error(e); alert('모델 로드 실패, 콘솔 확인'); }
    }
    async function loop(){ webcam.update(); const prediction = await model.predict(webcam.canvas); for(let i=0;i<maxPredictions;i++){ labelContainer.childNodes[i].innerText = prediction[i].className + ': ' + (prediction[i].probability*100).toFixed(1) + '%'; } requestAnimationFrame(loop); }
  </script>
</body>
</html>